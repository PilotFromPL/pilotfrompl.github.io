
<!DOCTYPE html>
<html lang="en">
<head>
	<base target="_top">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<title>Drone Orto on Leaflet</title>
	
	<link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" />

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

	<!-- GUGIK WMTS: -->
	<script src="https://unpkg.com/proj4leaflet@1.0.2/lib/proj4-compressed.js"></script>
    <script src="https://unpkg.com/proj4leaflet@1.0.2/src/proj4leaflet.js"></script>
	<script src="https://geoportalpl.github.io/leaflet.projwmts/src/TileLayer.ProjWMTS.js"></script>
	
	<!-- Better Scale Bar plugin: -->
	<link rel="stylesheet" href="L.Control.BetterScale.css">
	<script src="L.Control.BetterScale.js"></script>


	<style>
		html, body {
			height: 100%;
			margin: 0;
		}
		bottomMapPanel{
			height: 15%;
			max-width: 100%;
			max-height: 100%;
		}
	</style>

	<style>body { padding: 0; margin: 0; } #map { height: 85%; }</style>
</head>
<body>

<div id='map'></div>
<div id="bottomPanel">
</div>
<script>

 proj4.defs('EPSG:2180', '+proj=tmerc +lat_0=0 +lon_0=19 +k=0.9993 +x_0=500000 +y_0=-5300000 +ellps=GRS80 +units=m +no_defs');
 
 var crs = new L.Proj.CRS(
            "EPSG:2180",
            "+proj=tmerc +lat_0=0 +lon_0=19 +k=0.9993 +x_0=500000 +y_0=-5300000 +ellps=GRS80 +units=m +no_defs", {});


	var map = L.map('map', {
		  //crs: L.CRS.EPSG4326,
		  zoom: 16,		// Initial map zoom level
		  // maxBounds: [[-90, -180], [90, 180]],
		  minZoom: 3,
		  // ================================
		  center: [51.481466, 23.357970],			// Ulinówka
		  // ================================

	});

	// var osmHOT = L.tileLayer('https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', {
    // maxZoom: 19,
    // attribution: '© OpenStreetMap contributors, Tiles style by Humanitarian OpenStreetMap Team hosted by OpenStreetMap France'});

	var gugikNMT = L.tileLayer.wms('https://mapy.geoportal.gov.pl/wss/service/PZGIK/NMT/GRID1/WMS/ShadedRelief', {
                layers: 'Raster',
                format: 'image/jpeg',
                transparent: false,
                //maxZoom: 21
            }).addTo(map);

	var bdot10k = L.tileLayer.projwmts('https://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/BDOT10k', {
            format: 'image/png',
            tileSize: 512,
            version: '1.0.0',
            transparent: true,
            crs: crs,
            origin: [850000.0, 100000.0],
            scales: [7559538.928571429, 3779769.4642857146, 1889884.7321428573, 944942.3660714286, 472471.1830357143, 236235.59151785716, 94494.23660714286, 47247.11830357143, 23623.559151785714, 9449.423660714287, 4724.711830357143, 1889.8847321428573, 944.9423660714286, 472.4711830357143],
            tilematrixSet: 'EPSG:2180',
            opacity: 0.8,
            crossOrigin: true,
            //minZoom: 5
        }); // NIE DAJĘ TU addTo(map) ŻEBY TA WARSTWA NIE BYŁA AKTYWNA NA POCZĄTKU
    

    var droneOrtoTiles = L.tileLayer('tiles/./{z}/{x}/{y}.png', {
		tms: 1, 
		opacity: 1.0, 
		//attribution: "", 
		//minZoom: 10, 
		//maxZoom: 20
	}).addTo(map);

	//var overlaysGroup = L.layerGroup([bdot10k, gugikNMT,droneOrtoTiles]);

	var baseLayers = {
	'BDOT10K (WMTS)': bdot10k,
	'NMT': gugikNMT,
	};
		
	var overlays = {
			'Ortofoto z drona': droneOrtoTiles
	};
	
	
	// STEROWANIE WARSTWAMI:
	//L.control.layers(baseLayers, overlays).addTo(map);

	// layerControl.addBaseLayer(bdot10k, "OpenTopoMap");
	//layerControl.addOverlay( droneOrtoTiles, "Dron ORTO");
    

// Better Scale Bar plugin:

	L.control.betterscale(
		{
			metric: true,
			imperial: false,
		}
	).addTo(map);


// DODANIE KONTROLEK DO SWOJEGO DIV'A

	var bottomPanel_div = L.DomUtil.get(bottomPanel); // pobieranie elementu przez jego id

	var bottomCtrls = L.control.layers(baseLayers, overlays) ;

bottomCtrls.addTo(map);
bottomPanel_div.appendChild(bottomCtrls.getContainer());

</script>


</body>
</html>
